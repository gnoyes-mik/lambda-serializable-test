https://github.com/back-end-study/effective-java/pull/61

## λλ‹¤λ” μ§λ ¬ν™” ν•΄μ„λ” μ•λλ” μ΄μ 

> λλ‹¤λ„ μµλ… ν΄λμ¤μ²λΌ μ§λ ¬ν™” ν•νƒκ°€ κµ¬ν„λ³„λ΅(κ°€λ Ή κ°€μƒλ¨Έμ‹ λ³„λ΅) λ‹¤λ¥Ό μ μλ‹¤. λ”°λΌμ„ λλ‹¤λ¥Ό μ§λ ¬ν™”ν•λ” μΌμ€ κ·Ήν μ‚Όκ°€μ•Ό ν•λ‹¤(μµλ… ν΄λμ¤μ μΈμ¤ν„΄μ¤λ„ λ§μ°¬κ°€μ§€λ‹¤)  - p.285 -
>

[μ¤λΌν΄ κ³µμ‹λ¬Έμ„](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#serialization)μ—μ„λ„ λλ‹¤ ν‘ν„μ‹κ³Ό μµλ… ν΄λμ¤μ— λ€ν• μ§λ ¬ν™”λ¥Ό 'κ°•λ ¥ν•κ²' κ¶μ¥ν•μ§€ μ•λ‹¤

κ·Έ μ΄μ λ” λλ‹¤ ν‘ν„μ‹μ΄λ‚ μµλ… ν΄λμ¤μ— λ€ν•΄μ„ μ§λ ¬ν™”λ¥Ό ν•  λ•, μλ°” μ»΄νμΌλ¬κ°€ νΉμ • κµ¬λ¬Έμ— λ€ν•΄μ„ [Synthetic constructs](https://www.baeldung.com/java-synthetic)(μΈμ΅° κµ¬λ¬Έμ΄ λ§λ” λ²μ—­ κ°™μ)μ„ μ‚½μ…ν•λ”λ° μ΄ Synthetic constructsλ” μ»΄νμΌλ¬μ κµ¬ν„ λ°©μ‹μ— λ”°λΌμ„ λ‹¤λ¥Ό μ μλ‹¤.
μ΄ μλ―Έλ” '.class' νμΌλ„ μ»΄νμΌλ¬ κµ¬ν„μ— λ”°λΌ λ‹¤λ¥Ό μ μμμ„ μλ―Έν•λ‹¤. [λ‚΄μ© λ³΄κΈ°](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html#serialization)

κ²°κ³Όμ μΌλ΅ μ„μ μ΄μ μ— μν•΄μ„ λ‹¤λ¥Έ μ»΄νμΌλ¬λ¥Ό μ‚¬μ©ν•κ³  μλ” κ²½μ° νΈν™μ„±μ λ¬Έμ κ°€ λ°μƒν•  μ μκΈ° λ•λ¬Έμ— μ§λ ¬ν™”λ¥Ό ν•λ”κ²ƒμ€ κ°•ν•κ² κ¶μ¥ν•μ§€ μ•λ”λ‹¤!

---

## λλ‹¤λ¥Ό μ§λ ¬ν™” ν•λ” λ°©λ²•

ν•μ§€λ§ λ•μ— λ”°λΌμ„ λλ‚ ν‘ν„μ‹μ΄λ‚ μµλ… ν΄λμ¤κ°€ ν¬ν•¨λ ν΄λμ¤λ¥Ό μ§λ ¬ν™”λ¥Ό ν•΄μ•Όν•  λ•λ„ μμ„ μ μλ‹¤

λ¨Όμ €, λλ‹¤κ°€ μ •μλ ν΄λμ¤λ¥Ό λƒ…λ‹¤ μ§λ ¬ν™”/μ—­μ§λ ¬ν™”λ¥Ό ν•΄λ³΄μ
![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_15 11 27](https://user-images.githubusercontent.com/68587990/201023365-a8dfed5b-9bb4-4c03-a38e-fe8960f4bb88.png)


main λ©”μ†λ“μ—μ„ ν…μ¤νΈ λ°©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤

1. Runnable κ°μ²΄ fn νλ“
2. fn μ‹¤ν–‰
3. fn μ§λ ¬ν™” ν›„ νμΌλ΅ μ €μ¥
4. νμΌ μ—­μ§λ ¬ν™”
5. μ—­μ§λ ¬ν™” λ κ°μ²΄ deserializedFn μ‹¤ν–‰

main λ©”μ†λ“λ¥Ό μ‹¤ν–‰ ν•΄λ³΄λ©΄
![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_14 57 54](https://user-images.githubusercontent.com/68587990/201023435-9da02cc7-10f7-4d58-8e24-52a7c675f4d8.png)


μ§λ ¬ν™”λ¥Ό ν•λ ¤κ³  ν•  λ• **`NotSerializableException`**μ΄ λ°μƒν•λ©΄μ„ μ§λ ¬ν™”μ— μ‹¤ν¨ν•λ‹¤..

### λλ‹¤ μ§λ ¬ν™”λ¥Ό ν•λ©΄ μ•λλ‹¤κ³  ν–μ§€,, ν•μ§€ λ»ν•λ‹¤κ³ λ” μ• ν–μ–μ•„,,

class νμΌμ„ λ΄λ„ λ³„ λ¬Έμ κ°€ μ—†μ–΄λ³΄μ΄λ”λ°..

![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_15 17 07](https://user-images.githubusercontent.com/68587990/201023485-a8b4cd5d-ff2a-4be3-81ff-f2d0cf62ce0c.png)


κ·Έλ ‡λ‹¤,,,! μµλ… ν΄λμ¤μ μƒμ„±,λ™μ‘ λ°©μ‹μ€ μ»΄νμΌ νƒ€μ„μ— κ²°μ •λμ§€λ§, λλ‹¤λ” λ°νƒ€μ„μ— μ‹¤μ  νΈμ¶μ‹ κ²°μ •λλ‹¤κ³  ν•λ‹¤. (**invokedynamic**)

κ·Έλ ‡κΈ° λ•λ¬Έμ— javaλ¥Ό μ‹¤ν–‰ μ‹ν‚¬ λ• `-Djdk.internal.lambda.dumpProxyClasses={output-dir}` μµμ…μ„ λ„£μ–΄μ£Όκ² λλ©΄ μ‹¤μ  λλ‹¤κ°€ μƒμ„±λλ” ν΄λμ¤ νμΌμ„ λ³Ό μ μλ‹¤.

> β— `-Djdk.internal.lambda.dumpProxyClasses` μµμ… μ‚¬μ© μ‹ κ°™μ΄ μ‚¬μ©λκ³  μλ” λ¨λ“  λΌμ΄λΈλ¬λ¦¬μ— λ€ν• class νμΌμ΄ μƒμ„±λ  μ μλ‹¤
>

![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_15 33 10](https://user-images.githubusercontent.com/68587990/201023638-1539acbf-7eb4-4e9c-8157-22a40357aebb.png)


μ°λ¦¬κ°€ μΌλ°μ μΌλ΅ μ§λ ¬ν™”λ¥Ό ν•  λ• ν•λ” λ°©μ‹μΌλ΅ NotSerializableLambdaExpression ν΄λμ¤μ— Serializable μΈν„°νμ΄μ¤λ¥Ό μ„ μ–Έν–μ§€λ§,, **μ„ μµμ…μΌλ΅ μƒμ„±λ λλ‹¤μ class νμΌμ„ λ³΄λ©΄ Serializable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μμ§€ μ•λ‹¤**..

### λλ‹¤λ¥Ό μ§λ ¬ν™” ν•λ ¤λ©΄ νƒ€μ… μΊμ¤νΈ(Type cast)λ¥Ό ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤

μ°λ¦¬κ°€ μ„ μ–Έν• **ν•¨μν• μΈν„°νμ΄μ¤μ™€ Serializeble μΈν„°νμ΄μ¤λ¥Ό κ²°ν•©ν• νƒ€μ…μΌλ΅ λλ‹¤μ‹μ„ νƒ€μ… μΊμ¤ν…μ„ ν•΄μ•Όλλ‹¤**

μλ¥Όλ“¤μ–΄ μ°λ¦¬κ°€ μ‚¬μ©ν•κ³  μλ” ν•¨μν• μΈν„°νμ΄μ¤λ” Runnableμ΄κ³  μ΄λ¥Ό νƒ€μ… μΊμ¤ν…ν•λ©΄ μ•„λμ™€ κ°™λ‹¤
![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_15 42 02](https://user-images.githubusercontent.com/68587990/201023704-19370f26-9119-4e15-ad96-2934ee4710ab.png)



νƒ€μ… μΊμ¤ν…μ„ ν•΄μ¤€ λ’¤ μƒμ„±λ λλ‹¤ class νμΌμ„ μ‚΄ν΄λ³΄λ©΄
![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_15 44 39](https://user-images.githubusercontent.com/68587990/201023743-e1b368d6-c0f6-42f9-a431-7663623d292b.png)



μ „ κ³Όλ” λ‹¤λ¥΄κ² Runnableκ³Ό Serializable μΈν„°νμ΄μ¤λ¥Ό λ¨λ‘ κµ¬ν„ν•κ³  μλ”κ²ƒμ„ λ³Ό μ μλ‹¤!

>
> π’΅ `(Runnable & Serializable)` λ°©μ‹μΌλ΅ νƒ€μ… μΊμ¤ν…μ„ ν•΄μ£Όμ–΄λ„ λμ§€λ§ μ΄λ” λ³΄μΌλ¬ ν”λ μ΄νΈ μ½”λ“κ°€ λ  μ μμΌλ―€λ΅
> λ…μ‹μ μΌλ΅ λ‘ μΈν„°νμ΄μ¤λ¥Ό  μƒμ†ν• μ»¤μ¤ν…€ν• μΈν„°νμ΄μ¤λ¥Ό λ§λ“  λ’¤ νƒ€μ…μΊμ¤νΈλ¥Ό ν•λ©΄ λ” κΉ”λ”ν•λ‹¤
> ex)
> interface SerializableRunnable extends Runnable, Serializable { }
>
> (SerializableRunnable) () β†’ System.out.println(β€β€);

νƒ€μ… μΊμ¤νΈλ¥Ό ν•΄μ¤€λ’¤, λ‹¤μ‹ ν•λ² main λ©”μ†λ“λ΅ ν…μ¤νΈλ¥Ό ν•΄λ³΄μ!

![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-11-10_15 51 17](https://user-images.githubusercontent.com/68587990/201024007-43ad1e5f-dae1-4ab8-9b93-de67cf46c7d0.png)


μ •μƒμ μΌλ΅ μ λ™μ‘ν•λ”κ²ƒμ„ λ³Ό μ μλ‹¤..π‘π»π‘π»

λλ‹¤ μ§λ ¬ν™”μ κΈ°λ³Έ λ©”μ»¤λ‹μ¦μ— λ€ν•΄ λ” μƒμ„Έν μ•κ³  μ‹¶μΌλ©΄ [Serialize a Lambda in Java](https://www.baeldung.com/java-serialize-lambda)λ¥Ό μ°Έκ³ ν•μ

---

## μ •λ¦¬

- λλ‹¤λ” μΌλ°μ μΈ μ§λ ¬ν™” λ°©μ‹μΌλ΅λ” μ§λ ¬ν™” λμ§€ μ•μΌλ―€λ΅ νƒ€μ… μΊμ¤νΈλ¥Ό ν•΄μ•Όν•λ‹¤
- ν•μ§€λ§ κ³µμ‹μ μΌλ΅λ” λλ‹¤λ‚ μµλ… ν΄λμ¤μ— λ€ν• μ§λ ¬ν™”λ¥Ό β€κ°•ν•κ²β€™ κ¶μ¥ν•μ§€ μ•λ”λ‹¤
- κΌ­ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λΌλ©΄ λ¦¬ν©ν„°λ§ ν•λ”κ²ƒμ„ κ¶μ¥ν•λ‹¤